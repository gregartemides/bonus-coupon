import fetch from 'node-fetch';

export default phone =>
  fetch(process.env.REACT_APP_API_URL, {
    method: 'POST',
    body: `phone=${encodeURIComponent(phone)}`,
    headers: {
      'Content-Type': 'application/x-www-form-urlencoded',
    },
  })
    // parse response
    .then(res => res.json())
    // success contacting server
    .then(json =>
      ({
        responseReceived: true,
        responseMessage: json.message,
      }))
    // error connecting to server or bad json response
    .catch(() =>
      ({
        responseReceived: true,
        responseMessage: 'Error! The SMS server is down.',
      }));
